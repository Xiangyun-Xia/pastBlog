
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>angularjs学习笔记 | 夏祥云的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Xiangyun-Xia">
    

    
    <meta name="description" content="介绍
AngularJS是一款由Google公司开发维护的前端MVC框架，其克服了HTML在构建应用上的诸多不足，从而降低了开发成本提升了开发效率。

特点
AngularJS与我们之前学习的jQuery是有一定的区别的，jQuery更准确来说只是一个类库（类库指的是一系列函数的集合）以DOM做为驱动（核心），而AngularJS则一个框架（诸多类库的集合）以数据和逻辑做为驱动（核心）。
框架对开">
<meta property="og:type" content="article">
<meta property="og:title" content="angularjs学习笔记">
<meta property="og:url" content="http://yoursite.com/2016/12/28/angularjs学习笔记/index.html">
<meta property="og:site_name" content="夏祥云的博客">
<meta property="og:description" content="介绍
AngularJS是一款由Google公司开发维护的前端MVC框架，其克服了HTML在构建应用上的诸多不足，从而降低了开发成本提升了开发效率。

特点
AngularJS与我们之前学习的jQuery是有一定的区别的，jQuery更准确来说只是一个类库（类库指的是一系列函数的集合）以DOM做为驱动（核心），而AngularJS则一个框架（诸多类库的集合）以数据和逻辑做为驱动（核心）。
框架对开">
<meta property="og:updated_time" content="2017-04-15T11:13:05.008Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="angularjs学习笔记">
<meta name="twitter:description" content="介绍
AngularJS是一款由Google公司开发维护的前端MVC框架，其克服了HTML在构建应用上的诸多不足，从而降低了开发成本提升了开发效率。

特点
AngularJS与我们之前学习的jQuery是有一定的区别的，jQuery更准确来说只是一个类库（类库指的是一系列函数的集合）以DOM做为驱动（核心），而AngularJS则一个框架（诸多类库的集合）以数据和逻辑做为驱动（核心）。
框架对开">

    
    <link rel="alternative" href="/atom.xml" title="夏祥云的博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favico.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="夏祥云的博客" title="夏祥云的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="夏祥云的博客">夏祥云的博客</a></h1>
				<h2 class="blog-motto">Just For Fun ~</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/tags">标签</a></li>
					
						<li><a href="/categories">分类</a></li>
					
					<li>
 					
						<form class="search" action="https://www.baidu.com/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/28/angularjs学习笔记/" title="angularjs学习笔记" itemprop="url">angularjs学习笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Xiangyun-Xia" target="_blank" itemprop="author">Xiangyun-Xia</a>
		
  <p class="article-time">
    <time datetime="2016-12-27T16:00:00.000Z" itemprop="datePublished"> 发表于 2016-12-28</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#特点"><span class="toc-number">1.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MVC"><span class="toc-number">1.2.</span> <span class="toc-text">MVC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块化"><span class="toc-number">2.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义应用"><span class="toc-number">2.1.</span> <span class="toc-text">定义应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义模块"><span class="toc-number">2.2.</span> <span class="toc-text">定义模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义控制器"><span class="toc-number">2.3.</span> <span class="toc-text">定义控制器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指令"><span class="toc-number">3.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置指令"><span class="toc-number">3.1.</span> <span class="toc-text">内置指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义指令"><span class="toc-number">3.2.</span> <span class="toc-text">自定义指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作用域"><span class="toc-number">4.</span> <span class="toc-text">作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#根作用域"><span class="toc-number">4.1.</span> <span class="toc-text">根作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子作用域"><span class="toc-number">4.2.</span> <span class="toc-text">子作用域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务"><span class="toc-number">5.</span> <span class="toc-text">服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置服务"><span class="toc-number">5.1.</span> <span class="toc-text">内置服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由"><span class="toc-number">6.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SPA"><span class="toc-number">6.1.</span> <span class="toc-text">SPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由-1"><span class="toc-number">6.2.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用"><span class="toc-number">6.2.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#路由参数"><span class="toc-number">6.2.2.</span> <span class="toc-text">路由参数</span></a></li></ol></li></ol></li></ol>
		
		</div>
		
		<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote>
<p>AngularJS是一款由Google公司开发维护的前端MVC框架，其克服了HTML在构建应用上的诸多不足，从而降低了开发成本提升了开发效率。</p>
</blockquote>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>AngularJS与我们之前学习的jQuery是有一定的区别的，jQuery更准确来说只是一个类库（类库指的是一系列函数的集合）以DOM做为驱动（核心），而AngularJS则一个框架（诸多类库的集合）以数据和逻辑做为驱动（核心）。</li>
<li>框架对开发的流程和模式做了约束，开发者遵照约束进行开发，更注重的实际的业务逻辑。</li>
<li>AngularJS有着诸多特性，最为核心的是：模块化、双向数据绑定、语义化标签、依赖注入等。</li>
<li>与之类似的框架还有BackBone、KnockoutJS、Vue、React等。</li>
</ul>
<h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><ul>
<li>MVC是一种开发模式，由模型（Model）、视图（View）、控制器（Controller）3部分构成，采用这种开发模式为合理组织代码提供了方便、降低了代码间的耦合度、功能结构清晰可见。<ul>
<li>模型（Model）一般用来处理数据（读取/设置），一般指操作数据库。</li>
<li>视图（View）一般用来展示数据，比如通过HTML展示。</li>
<li>控制器（Controller）一般用做连接模型和视图的桥梁。</li>
</ul>
</li>
<li>MVC更多应用在后端开发程序里，后被引入到前端开发中，由于受到前端技术的限制便有了一些细节的调整，进而出现了很多MVC的衍生版（子集）如MVVM、MVW、MVP、<code>MV*</code>等。</li>
<li>注：做为初学可以不必过于在意这些概念。</li>
</ul>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><blockquote>
<p>使用AngularJS构建应用（App）时是以模块化（Module）的方式组织的，即将整个应用划分成若干模块，每个模块都有各自的职责，最终组合成一个整体。</p>
<p>采用模块化的组织方式，可以最大程度的实现代码的复用，可以像搭积木一样进行开发。</p>
</blockquote>
<h3 id="定义应用"><a href="#定义应用" class="headerlink" title="定义应用"></a>定义应用</h3><blockquote>
<p>通过为任一HTML标签添加ng-app属性，可以指定一个应用，表示此标签所包裹的内容都属于应用（App）的一部分。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">'en'</span> <span class="attr">ng-app</span>=<span class="string">'App'</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><blockquote>
<p>AngularJS提供了一个全局对象angular，在此全局对象下存在若干的方法，其中angular.module()方法用来定义一个模块。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'app'</span>,[]);</div></pre></td></tr></table></figure>
<p>注：应用（App）其本质也是一个模块（一个比较大的模块）。</p>
<h3 id="定义控制器"><a href="#定义控制器" class="headerlink" title="定义控制器"></a>定义控制器</h3><blockquote>
<p>控制器（Controller）作为连接模型（Model）和视图（View）的桥梁存在，所以当我们定义好了控制器以后也就定义好了模型和视图。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">App.controller(<span class="string">'DemoCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.name = <span class="string">'康熙'</span>;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<blockquote>
<p>模型（Model）数据是要展示到视图（View）上的，所以需要将控制器（Controller）关联到视图（View）上，通过为HTML标签添加ng-controller属性并赋值相应的控制器（Controller）的名称，就确立了关联关系。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"DemoCtrl"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以上步骤就是AngularJS最基本的MVC工作模式。</p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><blockquote>
<p>HTML在构建应用（App）时存在诸多不足之处，AngularJS通过扩展一系列的HTML属性或标签来弥补这些缺陷，所谓指令就是AngularJS自定义的HTML属性或标签，这些指令都是以ng-做为前缀的，例如ng-app、ng-controller、ng-repeat等。</p>
</blockquote>
<h3 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h3><ul>
<li>ng-app 指定应用根元素，至少有一个元素指定了此属性。</li>
<li>ng-controller 指定控制器</li>
<li>ng-show控制元素是否显示，true显示、false不显示</li>
<li>ng-hide控制元素是否隐藏，true隐藏、false不隐藏</li>
<li>ng-if控制元素是否“存在”，true存在、false不存在</li>
<li>ng-src增强图片路径</li>
<li>ng-href增强地址</li>
<li>ng-class控制类名</li>
<li>ng-include引入模板</li>
<li>ng-disabled表单禁用</li>
<li>ng-readonly表单只读</li>
<li>ng-checked单/复选框表单选中</li>
<li>ng-selected下拉框表单选中</li>
</ul>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><blockquote>
<p>AngularJS允许根据实际业务需要自定义指令，通过angular全局对象下的directive方法实现。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">App.directive(<span class="string">"tag"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">restrict</span>: <span class="string">"ECMA"</span>,</div><div class="line">        <span class="attr">replace</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">template</span>: <span class="string">"&lt;h1&gt;hello AngularJS&lt;/h1&gt;"</span>,</div><div class="line">        <span class="attr">link</span>: <span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attrs</span>) </span>&#123;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>E 代表元素指令     Element</li>
<li>A 代表属性执行     Attribute</li>
<li>M 代表注释指令     Mark</li>
<li>C 代表class执行    Class</li>
</ul>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><blockquote>
<p>通常AngularJS中应用（App）是由若干个视图（View）组合成而成的，而视图（View）又都是HTML元素，并且HTML元素是可以互相嵌套的，另一方面视图都隶属于某个控制器（Controller），进而控制器之间也必然会产生嵌套关系。</p>
<p>每个控制器（Controller）又都对应一个模型（Model）也就是<code>$scope</code>对象，不同层级控制器（Controller）下的<code>$scope</code>便产生了作用域。</p>
</blockquote>
<h3 id="根作用域"><a href="#根作用域" class="headerlink" title="根作用域"></a>根作用域</h3><blockquote>
<p>一个AngularJS的应用（App）在启动时会自动创建一个根作用域<code>$rootScope</code>，这个根作用域在整个应用范围（ng-app所在标签以内）都是可以被访问到的。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-app</span>=<span class="string">"App"</span> <span class="attr">ng-init</span>=<span class="string">"name='itcast';age=10"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;age&#125;&#125;&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="子作用域"><a href="#子作用域" class="headerlink" title="子作用域"></a>子作用域</h3><blockquote>
<p>通过ng-controller指令可以创建一个子作用域，新建的作用域可以访问其父作用域的数据。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent"</span> <span class="attr">ng-controller</span>=<span class="string">"ParentCtrl"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child"</span> <span class="attr">ng-controller</span>=<span class="string">"ChildCtrl"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>,[]);</div><div class="line">App.controller(<span class="string">'ParentCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.name = <span class="string">'康熙'</span>;</div><div class="line">&#125;]);</div><div class="line">App.controller(<span class="string">'ChildCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.name = <span class="string">'雍正'</span>;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><blockquote>
<p>服务是一个对象或函数，对外提供特定的功能。</p>
</blockquote>
<h3 id="内置服务"><a href="#内置服务" class="headerlink" title="内置服务"></a>内置服务</h3><ul>
<li><p>$log打印调试信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">"App"</span>,[]);</div><div class="line">App.controller(<span class="string">"DemoCtrl"</span>,[<span class="string">"$log"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$log</span>) </span>&#123;</div><div class="line">    $log.error(<span class="string">'这是一个错误'</span>);</div><div class="line">    $log.warn(<span class="string">'这是一个警告'</span>);</div><div class="line">    $log.debug(<span class="string">'这是一个调试'</span>);</div><div class="line">    $log.info(<span class="string">'这是一个普通内容'</span>);</div><div class="line">    $log.log(<span class="string">'这是console.log'</span>);</div><div class="line">&#125;])</div></pre></td></tr></table></figure>
</li>
<li><p><code>$timeout</code>&amp;<code>$interval</code>对原生Javascript中的setTimeout和setInterval进行了封装。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">"App"</span>,[]);</div><div class="line">App.controller(<span class="string">"DemoCtrl"</span>,[<span class="string">'$timeout'</span>,<span class="string">'$log'</span>,<span class="string">'$interval'</span>,<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$timeout,$log,$interval,$scope</span>) </span>&#123;</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $scope.name = <span class="string">'小明'</span>;</div><div class="line">        $scope.$digest();</div><div class="line">    &#125;,<span class="number">3000</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> timer = $interval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $scope.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    &#125;,<span class="number">1000</span>);</div><div class="line"></div><div class="line">    $scope.stop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $interval.cancel(timer);</div><div class="line">    &#125;</div><div class="line">&#125;])</div></pre></td></tr></table></figure>
</li>
<li><p><code>$filter</code>在控制器中格式化数据。</p>
</li>
<li><p>$http用于向服务端发起异步请求。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">"App"</span>,[]);</div><div class="line">App.controller(<span class="string">"DemoCtrl"</span>,[<span class="string">"$http"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$http</span>) </span>&#123;</div><div class="line">    $http(&#123;</div><div class="line">        <span class="attr">url</span>:<span class="string">''</span>,<span class="comment">//请求地址</span></div><div class="line">        method:<span class="string">''</span>,<span class="comment">//请求方式</span></div><div class="line">        data:<span class="string">''</span>,<span class="comment">//post方式的请求参数</span></div><div class="line">        params:<span class="string">''</span>,<span class="comment">//get方式的请求参数</span></div><div class="line">        header:&#123;</div><div class="line">            <span class="comment">//设置请求头</span></div><div class="line">        &#125;</div><div class="line">    &#125;).success(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//成功</span></div><div class="line">    &#125;).error(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//失败</span></div><div class="line">    &#125;);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p><strong>同时还支持多种快捷方式如<code>$http.get()</code>、<code>$http.post()</code>、<code>$http.jsonp</code></strong></p>
</li>
</ul>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><blockquote>
<p>一个应用是由若个视图组合而成的，根据不同的业务逻辑展示给用户不同的视图，路由则是实现这一功能的关键。</p>
</blockquote>
<h3 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h3><ul>
<li>SPA（Single Page Application）指的是通单一页面展示所有功能，通过Ajax动态获取数据然后进行实时渲染，结合CSS3动画模仿原生App交互，然后再进行打包（使用工具把Web应用包一个壳，这个壳本质上是浏览器）变成一个“原生”应用。</li>
<li>在PC端也有广泛的应用，通常情况下使用Ajax异步请求数据，然后实现内容局部刷新，局部刷新的本质是动态生成DOM，新生成的DOM元素并没有真实存在于文档中，所以当再次刷新页面时新添加的DOM元素会“丢失”，通过单页面应可以很好的解决这个问题。</li>
</ul>
<h3 id="路由-1"><a href="#路由-1" class="headerlink" title="路由"></a>路由</h3><blockquote>
<p>在后端开发中通过URL地址可以实现页面（视图）的切换，但是AngularJS是一个纯前端MVC框架，在开发单页面应用时，所有功能都在同一页面完成，所以无需切换URL地址（即不允许产生跳转），但Web应用中又经常通过链接（a标签）来更新页面（视图），当点击链接时还要阻止其向服务器发起请求，通过锚点（页内跳转）可以实现这一点。</p>
</blockquote>
<p>实现单页面应用需要具备：</p>
<ol>
<li>只有一页面</li>
</ol>
<ol>
<li>链接使用锚点</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'hashchange'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// console.log(location.hash);</span></div><div class="line">    <span class="keyword">var</span> hash = location.hash.slice(<span class="number">1</span>);</div><div class="line">    <span class="comment">// console.log(hash);</span></div><div class="line">    <span class="comment">// 根hash的变化取出对应的内容</span></div><div class="line">    <span class="comment">// 放到页面某个位置</span></div><div class="line">    <span class="keyword">var</span> url = <span class="string">''</span>;</div><div class="line">    <span class="keyword">switch</span>(hash) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'login'</span>:</div><div class="line">        url = hash + <span class="string">'.html'</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'register'</span>:</div><div class="line">        url = hash + <span class="string">'.html'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</div><div class="line">    xhr.open(<span class="string">'get'</span>, <span class="string">'./views/'</span> + url);</div><div class="line">    <span class="comment">// xhr.open('get', './hash.php?hash=' + hash);</span></div><div class="line">    xhr.send();</div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(xhr.responseText);</div><div class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.main'</span>).innerHTML = xhr.responseText;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>通过上面的例子发现在单一页面中可以能过hashchange事件监听到锚点的变化，进而可以实现为不同的锚点准不同的视图，单页面应用就是基于这一原理实现的。</li>
<li>AngularJS对这一实现原理进行了封装，将锚点的变化封装成路由（Route）,这是与后端路由的根本区别。</li>
<li>在1.2版前路由功能是包含在AngularJS核心代码当中，之后的版本将路由功能独立成一个模块，<a href="https://code.angularjs.org/" target="_blank" rel="external">下载angular-route.js</a></li>
</ul>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><ol>
<li><p>引入angular-route.js</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'./libs/angular.min.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 路由模块 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular-route.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>实例化模块（App）时，当成依赖传进去（模块名称叫ngRoute）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, [<span class="string">'ngRoute'</span>]);</div></pre></td></tr></table></figure>
</li>
<li><p>配置路由模块</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">App.config([<span class="string">'$routeProvider'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$routeProvider</span>) </span>&#123;</div><div class="line">    <span class="comment">// 使用when方法监听地址的变化</span></div><div class="line">    <span class="comment">// 然后处理相应的逻辑</span></div><div class="line">    $routeProvider.when(<span class="string">'/register'</span>, &#123;</div><div class="line">        <span class="comment">// </span></div><div class="line">        templateUrl: <span class="string">'./views/register.html'</span>,</div><div class="line">        <span class="attr">controller</span>: <span class="string">'RegisterCtrl'</span></div><div class="line">    &#125;).when(<span class="string">'/login'</span>, &#123;</div><div class="line">        <span class="comment">// </span></div><div class="line">        templateUrl: <span class="string">'./views/login.html'</span>,</div><div class="line">        <span class="attr">controller</span>: <span class="string">'LoginCtrl'</span></div><div class="line">    &#125;).when(<span class="string">'/404'</span>, &#123;</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">'./views/404.html'</span></div><div class="line">    &#125;)</div><div class="line">    .otherwise(&#123;</div><div class="line">        <span class="attr">redirectTo</span>: <span class="string">'/404'</span></div><div class="line">    &#125;);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
</li>
<li><p>布局模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#!/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#!/login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--通过ng-view指令布局模板，路由匹配的视图会被加载渲染到此区域。--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span> <span class="attr">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h4><ul>
<li>提供两个方法匹配路由，分别是when和otherwise，when方法需要两个参数，otherwise方法做为when方法的补充只需要一个参数，其中when方法可以被多次调用。</li>
<li>第1个参数是一个字符串，代表当前URL中的hash值。</li>
<li>第2个参数是一个对象，配置当前路由的参数，如视图、控制器等。<ul>
<li>template 字符串形式的视图模板</li>
<li>templateUrl 引入外部视图模板</li>
<li>controller 视图模板所属的控制器</li>
<li>redirectTo跳转到其它路由</li>
</ul>
</li>
<li>获取参数，在控制中注入$routeParams可以获取传递的参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 路由是需要经过 配置 后才能被使用</span></div><div class="line">App.config([<span class="string">'$routeProvider'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$routeProvider</span>) </span>&#123;</div><div class="line">    <span class="comment">// 参数不影响应路由</span></div><div class="line">    $routeProvider.when(<span class="string">'/register'</span>, &#123;</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">'./views/register.html'</span>,</div><div class="line">        <span class="attr">controller</span>: <span class="string">'RegisterCtrl'</span></div><div class="line">    &#125;).when(<span class="string">'/login/:name/:pass'</span>, &#123;</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">'./views/login.html'</span>,</div><div class="line">        <span class="attr">controller</span>: <span class="string">'LoginCtrl'</span></div><div class="line">    &#125;);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/框架/">框架</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/angularjs/">angularjs</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/12/28/angularjs学习笔记/" data-title="angularjs学习笔记 | 夏祥云的博客" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/04/25/面试总结（一）/" title="面试总结（一）">
  <strong>上一篇：</strong><br/>
  <span>
  面试总结（一）</span>
</a>
</div>


<div class="next">
<a href="/2016/12/22/ES6常用特性/"  title="ES6常用特性">
 <strong>下一篇：</strong><br/> 
 <span>ES6常用特性
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/12/28/angularjs学习笔记/" data-title="angularjs学习笔记" data-url="http://yoursite.com/2016/12/28/angularjs学习笔记/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#特点"><span class="toc-number">1.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MVC"><span class="toc-number">1.2.</span> <span class="toc-text">MVC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块化"><span class="toc-number">2.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义应用"><span class="toc-number">2.1.</span> <span class="toc-text">定义应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义模块"><span class="toc-number">2.2.</span> <span class="toc-text">定义模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义控制器"><span class="toc-number">2.3.</span> <span class="toc-text">定义控制器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指令"><span class="toc-number">3.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置指令"><span class="toc-number">3.1.</span> <span class="toc-text">内置指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义指令"><span class="toc-number">3.2.</span> <span class="toc-text">自定义指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作用域"><span class="toc-number">4.</span> <span class="toc-text">作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#根作用域"><span class="toc-number">4.1.</span> <span class="toc-text">根作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子作用域"><span class="toc-number">4.2.</span> <span class="toc-text">子作用域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务"><span class="toc-number">5.</span> <span class="toc-text">服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置服务"><span class="toc-number">5.1.</span> <span class="toc-text">内置服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由"><span class="toc-number">6.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SPA"><span class="toc-number">6.1.</span> <span class="toc-text">SPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由-1"><span class="toc-number">6.2.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用"><span class="toc-number">6.2.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#路由参数"><span class="toc-number">6.2.2.</span> <span class="toc-text">路由参数</span></a></li></ol></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/H5/" title="H5">H5<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/JS/" title="JS">JS<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具/" title="工具">工具<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/开发/" title="开发">开发<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/文档/" title="文档">文档<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/框架/" title="框架">框架<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/移动web/" title="移动web">移动web<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/面向对象/" title="面向对象">面向对象<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/regexp/" title="regexp">regexp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Canvas/" title="Canvas">Canvas<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Cookies-Session/" title="Cookies&amp;Session">Cookies&amp;Session<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/PHP/" title="PHP">PHP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HTTP/" title="HTTP">HTTP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/angularjs/" title="angularjs">angularjs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/requirejs/" title="requirejs">requirejs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/shell和vi/" title="shell和vi">shell和vi<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/跨域/" title="跨域">跨域<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/videojs/" title="videojs">videojs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/懒加载/" title="懒加载">懒加载<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AJAX/" title="AJAX">AJAX<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Bootstrap/" title="Bootstrap">Bootstrap<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/gulp/" title="gulp">gulp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/函数/" title="函数">函数<sup>1</sup></a></li>
			
		
		</ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">2</span></li></ul>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 不懂产品的设计不是好码农 <br/>
			Where amazing happens.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="Xiangyun-Xia">Xiangyun-Xia</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"祥云"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
