
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>网站前端网页优化的14条原则（雅虎十四条） | 夏祥云的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Xiangyun-Xia">
    

    
    <meta name="description" content="内容再丰富的网站，如果慢到无法访问也是毫无意义的；SEO做的再好的网站，如果搜索蜘蛛抓不到也是白搭；UE设计的再人性化的网站，如果用户连看都看不到也是空谈。
所以，网页的效率优化绝对是最值得关注的方面，那么，我们该如何才能提高一个网页的效率呢？对此，为大家分享一下雅虎网页优化的14条原则，也被称为：雅虎十四条，而这些原则也是我们作为一名SEO人员所必须了解的。

减少HTTP请求次数​    据">
<meta property="og:type" content="article">
<meta property="og:title" content="网站前端网页优化的14条原则（雅虎十四条）">
<meta property="og:url" content="http://yoursite.com/2016/10/09/网站前端网页优化的14条原则（雅虎十四条）/index.html">
<meta property="og:site_name" content="夏祥云的博客">
<meta property="og:description" content="内容再丰富的网站，如果慢到无法访问也是毫无意义的；SEO做的再好的网站，如果搜索蜘蛛抓不到也是白搭；UE设计的再人性化的网站，如果用户连看都看不到也是空谈。
所以，网页的效率优化绝对是最值得关注的方面，那么，我们该如何才能提高一个网页的效率呢？对此，为大家分享一下雅虎网页优化的14条原则，也被称为：雅虎十四条，而这些原则也是我们作为一名SEO人员所必须了解的。

减少HTTP请求次数​    据">
<meta property="og:updated_time" content="2017-04-17T12:22:31.128Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网站前端网页优化的14条原则（雅虎十四条）">
<meta name="twitter:description" content="内容再丰富的网站，如果慢到无法访问也是毫无意义的；SEO做的再好的网站，如果搜索蜘蛛抓不到也是白搭；UE设计的再人性化的网站，如果用户连看都看不到也是空谈。
所以，网页的效率优化绝对是最值得关注的方面，那么，我们该如何才能提高一个网页的效率呢？对此，为大家分享一下雅虎网页优化的14条原则，也被称为：雅虎十四条，而这些原则也是我们作为一名SEO人员所必须了解的。

减少HTTP请求次数​    据">

    
    <link rel="alternative" href="/atom.xml" title="夏祥云的博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favico.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="夏祥云的博客" title="夏祥云的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="夏祥云的博客">夏祥云的博客</a></h1>
				<h2 class="blog-motto">Just For Fun ~</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/tags">标签</a></li>
					
						<li><a href="/categories">分类</a></li>
					
					<li>
 					
						<form class="search" action="https://www.baidu.com/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/09/网站前端网页优化的14条原则（雅虎十四条）/" title="网站前端网页优化的14条原则（雅虎十四条）" itemprop="url">网站前端网页优化的14条原则（雅虎十四条）</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Xiangyun-Xia" target="_blank" itemprop="author">Xiangyun-Xia</a>
		
  <p class="article-time">
    <time datetime="2016-10-08T16:00:00.000Z" itemprop="datePublished"> 发表于 2016-10-09</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#减少HTTP请求次数"><span class="toc-number">1.</span> <span class="toc-text">减少HTTP请求次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用CDN-Content-Delivery-Network，内容分发网络"><span class="toc-number">2.</span> <span class="toc-text">使用CDN(Content Delivery Network，内容分发网络)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#增加Expires-Header"><span class="toc-number">3.</span> <span class="toc-text">增加Expires Header</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩页面元素"><span class="toc-number">4.</span> <span class="toc-text">压缩页面元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把样式表放在头上"><span class="toc-number">5.</span> <span class="toc-text">把样式表放在头上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把脚本文件放在底部"><span class="toc-number">6.</span> <span class="toc-text">把脚本文件放在底部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免CSS表达式"><span class="toc-number">7.</span> <span class="toc-text">避免CSS表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把JavaScript和CSS放到外部文件中"><span class="toc-number">8.</span> <span class="toc-text">把JavaScript和CSS放到外部文件中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#减少DNS查询次数"><span class="toc-number">9.</span> <span class="toc-text">减少DNS查询次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最小化JavaScript代码"><span class="toc-number">10.</span> <span class="toc-text">最小化JavaScript代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免重定向"><span class="toc-number">11.</span> <span class="toc-text">避免重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除重复的脚本文件"><span class="toc-number">12.</span> <span class="toc-text">删除重复的脚本文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置ETags"><span class="toc-number">13.</span> <span class="toc-text">配置ETags</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存Ajax"><span class="toc-number">14.</span> <span class="toc-text">缓存Ajax</span></a></li></ol>
		
		</div>
		
		<blockquote>
<p>内容再丰富的网站，如果慢到无法访问也是毫无意义的；SEO做的再好的网站，如果搜索蜘蛛抓不到也是白搭；UE设计的再人性化的网站，如果用户连看都看不到也是空谈。</p>
<p>所以，网页的效率优化绝对是最值得关注的方面，那么，我们该如何才能提高一个网页的效率呢？对此，为大家分享一下雅虎网页优化的14条原则，也被称为：雅虎十四条，而这些原则也是我们作为一名SEO人员所必须了解的。</p>
</blockquote>
<h3 id="减少HTTP请求次数"><a href="#减少HTTP请求次数" class="headerlink" title="减少HTTP请求次数"></a>减少HTTP请求次数</h3><p>​    据统计，有80%的最终用户响应时间是花在前端程序上，而其大部分时间则花在各种页面元素，如图像、样式表、脚本和Flash等的下载上，减少页面元素将会减少HTTP请求次数，这是快速显示页面的关键所在。</p>
<p>​    一种减少页面元素个数的方法是简化页面设计，但是否存在其他方式，能做到既有丰富内容，又能获得快速响应时间呢？以下是这样一些技术：</p>
<p>​    Image maps组合多个图片到一张图片中，总文件大小变化不大，但减少了HTTP请求次数从而加快了页面显示速度，该方式只适合图片连续的情况，同时坐标的定义是烦人又容易出错的工作。</p>
<p>​    CSS Sprites是更好的方法，它可以组合页面中的图片到单个文件中，并使用CSS的background-image和background-position属性来现实所需的部分图片。</p>
<p>​    Inline images使用data:URL scheme来在页面中内嵌图片，这将增大HTML文件的大小，组合inline images到你的（缓存）样式表是既能较少HTTP请求，又能避免加大HTML文件大小的方法。</p>
<p>​    Combined files通过组合多个脚本文件到单一文件来减少HTTP请求次数，样式表也可采用类似方法处理，这个方法虽然简单，但没有得到大规模的使用。</p>
<p>​    据资料显示：国外10大网站每页平均有7个脚本文件和2个样式表，当页面之间脚本和样式表变化很大时，该方式将遇到很大的挑战，但如果做到的话，将能加快响应时间。</p>
<p>​    减少HTTP请求次数是性能优化的起点，这最提高首次访问的效率起到很重要的作用，据Tenni Theurer的文章Browser Cache Usage - Exposed描述，40-60%的日常访问是首次访问，因此为首次访问者加快页面访问速度是用户体验的关键。</p>
<p>​    对此，建议：将首页的几十个小图标合并为一个，通过CSS控制它们的显示，减少了HTTP请求数。</p>
<h3 id="使用CDN-Content-Delivery-Network，内容分发网络"><a href="#使用CDN-Content-Delivery-Network，内容分发网络" class="headerlink" title="使用CDN(Content Delivery Network，内容分发网络)"></a>使用CDN(Content Delivery Network，内容分发网络)</h3><p>​    用户离web server的远近对响应时间也有很大影响，从用户角度看，把内容部署到多个地理位置分散的服务器上将有效提高页面装载速度，但是该从哪里开始呢？</p>
<p>​    作为实现内容地理分布的第一步，不要试图重构web应用以适应分布架构，改变架构将导致多个周期性任务，如同步session状态，在多个server之间复制数据库交易，这样缩短用户与内容距离的尝试可能被应用架构改版所延迟或阻止。</p>
<p>​    我们还记得80-90%的最终用户响应时间花在下载页面中的各种元素上，如图像文件、样式表、脚本和Flash等，与其花在重构系统这个困难的任务上，还不如先分布静态内容，这不仅能大大减少响应时间，而且由于CDN的存在，分布静态内容非常容易实现。</p>
<p>​    CDN是地理上分布的web server的集合，用于更高效地发布内容，通常基于网络远近来选择给具体用户服务的web server。</p>
<p>​    一些大型网站拥有自己的CDN，但是使用如Akamai Technologies、Mirror Image Internet或Limelight Networks等CDN服务提供商的服务将是划算的，在Yahoo!把静态内容分布到CDN减少了用户影响时间20%或更多，切换到CDN的代码修改工作是很容易的，但能达到提高网站的速度。</p>
<p>​    对此，建议是：目前还没用到，不过据客户反映，广东山东等地网络情况比较差，如果可以将占据主要带宽的静态资源通过CDN发布，相信可以大大缓解目前网站访问速度的问题。</p>
<h3 id="增加Expires-Header"><a href="#增加Expires-Header" class="headerlink" title="增加Expires Header"></a>增加Expires Header</h3><p>​    网页内容正变得越来越丰富，这意味着更多的脚本文件、样式表、图像文件和Flash，首次访问者将不得不面临多次HTTP请求，但通过使用Expires header，您可以在客户端缓存这些元素，这在后续访问中避免了不必要的HTTP请求，Expires header最常用于图像文件，但是它也应该用于脚本文件、样式表和Flash。</p>
<p>​    浏览器（和代理）使用缓存来减少HTTP请求的次数和大小，使得网页加速装载，Web server通过Expires header告诉客户端一个元素可以缓存的时间长度。</p>
<p>​    如果服务器是Apache的话，您可以使用ExpiresDefault基于当期日期来设置过期日期，如：ExpiresDefault “access plus 10 years”，设置过期时间为从请求时间开始计算的10年。</p>
<p>​    请记住，如果使用超长的过期时间，则当内容改变时，您必须修改文件名称，在Yahoo!我们经常把改名作为release的一个步骤：版本号内嵌在文件名中，如yahoo_2.0.6.js。</p>
<p>​    对此，建议是：在Apache配置了JS,CSS,image的缓存，如果静态资源需要更新，则采用修改文件版本号的方案确保客户端取得最新版本。</p>
<h3 id="压缩页面元素"><a href="#压缩页面元素" class="headerlink" title="压缩页面元素"></a>压缩页面元素</h3><p>​    通过压缩HTTP响应内容可减少页面响应时间，从HTTP/1.1开始，web客户端在HTTP请求中通过Accept-Encoding头来表明支持的压缩类型，如：Accept-Encoding: gzip,deflate.</p>
<p>​    如果Web server检查到Accept-Encoding头，它会使用客户端支持的方法来压缩HTTP响应，会设置Content-Encoding头，如：Content-Encoding: gzip。</p>
<p>​    Gzip是目前最流行及有效的压缩方法，其他的方式如deflate，但它效果较差，也不够流行。通过Gzip，内容一般可减少70%；如果是Apache，在1.3版本下需使用mod_gzip模块，而在2.x版本下，则需使用mod_deflate。</p>
<p>​    Web server根据文件类型来决定是否压缩，大部分网站对HTML文件进行压缩，但对脚本文件和样式表进行压缩也是值得的，实际上，对包括XML和JSON在内的任务文本信息进行压缩都是值得的，图像文件和PDF文件不应该被压缩，因为它们本来就是压缩格式保存的，对它们进行压缩，不但浪费CPU，而且还可能增加文件的大小。</p>
<p>​    因此，对尽量多的文件类型进行压缩是一种减少页面大小和提高用户体验的简便方法。</p>
<p>​    对此，建议是：600多K的ext2包，是人都会想到要去压缩它，压缩后的效果还不错，只有150多K，另外，JS、CSS、HTML也尽量压缩，要知道我们的很多客户还在使用1M的ADSL。</p>
<h3 id="把样式表放在头上"><a href="#把样式表放在头上" class="headerlink" title="把样式表放在头上"></a>把样式表放在头上</h3><p>​    无论是HTML还是XHTML还是CSS都是解释型的语言，而非编译型的，所以CSS到上方的话，那么浏览器解析结构的时候，就已经可以对页面进行渲染，这样就不会出现，页面结构光秃秃的先出来，然后CSS渲染，页面又突然华丽起来，这样太具有“戏剧性”的页面浏览体验了。</p>
<p>​    我们发现把样式表移到HEAD部分可以提高界面加载速度，因此这使得页面元素可以顺序显示。</p>
<p>​    在很多浏览器下，如IE，把样式表放在document的底部的问题在于它禁止了网页内容的顺序显示，浏览器阻止显示以免重画页面元素，那用户只能看到空白页了，Firefox不会阻止显示，但这意味着当样式表下载后，有些页面元素可能需要重画，这导致闪烁问题。</p>
<p>​    HTML规范明确要求样式表被定义在HEAD中，因此，为避免空白屏幕或闪烁问题，最好的办法是遵循HTML规范，把样式表放在HEAD中。</p>
<p>​    对此，建议是：目前还没有碰到把样式表放在文档后面的情况吧？</p>
<h3 id="把脚本文件放在底部"><a href="#把脚本文件放在底部" class="headerlink" title="把脚本文件放在底部"></a>把脚本文件放在底部</h3><p>​    与样式文件一样，我们需要注意脚本文件的位置，我们需尽量把它们放在页面的底部，这样一方面能顺序显示，另方面可达到最大的并行下载。</p>
<p>​    浏览器会阻塞显示直到样式表下载完毕，因此我们需要把样式表放在HEAD部分，而对于脚本来说，脚本后面内容的顺序显示将被阻塞，因此把脚本尽量放在底部意味着更多内容能被快速显示。</p>
<p>​    脚本引起的第二个问题是它阻塞并行下载数量，HTTP/1.1规范建议浏览器每个主机的并行下载数不超过2个，因此如果您把图像文件分布到多台机器的话，您可以达到超过2个的并行下载，但是当脚本文件下载时，浏览器不会启动其他的并行下载，甚至其他主机的下载也不启动。</p>
<p>​    在某些情况下，不是很容易就能把脚本移到底部的，如，脚本使用document.write方法来插入页面内容，同时可能还存在域的问题，不过在很多情况下，还是有一些方法的。</p>
<p>​    一个备选方法是使用延迟脚本（deferred script），DEFER属性表明脚本未包含document.write，指示浏览器刻继续显示，不幸的是，Firefox不支持DEFER属性，在IE中，脚本可能被延迟执行，但不一定得到需要的长时间延迟。</p>
<p>​    不过，从另外角度来说，如果脚本能被延迟执行，那它就可以被放在底部了。</p>
<p>​    对此，建议是：这点之前大家可能都没有意识到，不过在我们的XCube XUI中我们已经实施了这条法则，相信可以进一步提升页面的访问性能。</p>
<h3 id="避免CSS表达式"><a href="#避免CSS表达式" class="headerlink" title="避免CSS表达式"></a>避免CSS表达式</h3><p>​    CSS表达式是功能强大的(同时也是危险的)用于动态设置CSS属性的方式，IE从版本5开始支持CSS表达式，如<code>backgourd-color: expression((new Date()).getHours()%2?”#B8D4FF”:”#F08A00”)</code>，即背景色每个小时切换一次。</p>
<p>​    CSS表达式的问题是其执行次数超过大部分人的期望，不仅页面显示和resize时计算表达式，而且当页面滚屏，甚至当鼠标在页面上移动时都会重新计算表达式。</p>
<p>​    一种减少CSS表达式执行次数的方法是一次性表达式，即当第一次执行时就以明确的数值代替表达式，如果必须动态设置的话，可使用事件处理函数代替，如果您必须使用CSS表达式的话，请记住它们可能被执行上千次，从而影响页面性能。</p>
<p>​    对此，建议是：目前CSS的维护工作主要由UI人员负责，他们已经尽量在避免这种情况了。</p>
<h3 id="把JavaScript和CSS放到外部文件中"><a href="#把JavaScript和CSS放到外部文件中" class="headerlink" title="把JavaScript和CSS放到外部文件中"></a>把JavaScript和CSS放到外部文件中</h3><p>​    上述很多性能优化法则都基于外部文件进行优化，现在，我们必须问一个问题：JavaScript和CSS应该包括在外部文件，还是在页面文件中？</p>
<p>​    在现实世界中，使用外部文件会加快页面显示速度，因为外部文件会被浏览器缓存，如果内置JavaScript和CSS在页面中虽然会减少HTTP请求次数，但增大了页面的大小。</p>
<p>​    另外一方面，使用外部文件，会被浏览器缓存，则页面大小会减小，同时又不增加HTTP请求次数。</p>
<p>​    因此，一般来说，外部文件是更可行的方式，唯一的例外是内嵌方式对主页更有效，如Yahoo!和My Yahoo!都使用内嵌方式，一般来说，在一个session中，主页访问此时较少，因此内嵌方式可以取得更快的用户响应时间。</p>
<p>​    对此，建议是：ext2的代码作了很好的引导，目前前端开发人员都非常注意客户端模块的封装、重用，尽量以外部JS的方式提高代码的重用度，当然也要注意不要引入过多的外部资源，因为这违反了法则1。</p>
<p>​    目前CSS的封装也不错，但是主要是针对IE系列的解决方案，可以考虑引入YAML、blueprint等CSS框架，轻松解决浏览器兼容性问题。</p>
<p>​    另外，提醒大家一点：把JavaScript和css文件放到外部，并不内嵌于网页，同时可以考虑把样式表放到头上把脚本文件放到底部。需要注意的是尽量不要使用css的表达式，他很容易让浏览器出现假死。</p>
<h3 id="减少DNS查询次数"><a href="#减少DNS查询次数" class="headerlink" title="减少DNS查询次数"></a>减少DNS查询次数</h3><p>​    DNS用于映射主机名和IP地址，一般一次解析需要20～120毫秒，为达到更高的性能，DNS解析通常被多级别地缓存，如由ISP或局域网维护的caching server，本地机器操作系统的缓存（如windows上的DNS Client Service），浏览器，IE的缺省DNS缓存时间为30分钟，Firefox的缺省缓冲时间是1分钟。</p>
<p>​    减少主机名可减少DNS查询的次数，但可能造成并行下载数的减少，避免DNS查询可减少响应时间，而减少并行下载数可能增加响应时间，一个可行的折中是把内容分布到至少2个，最多4个不同的主机名上。</p>
<p>​    对此，建议是：为了绕开浏览器对下载线程数的限制，我们对静态资源启用了多域名，但是这么做违反了该法则，不过，对windows IE来说，DNS的缓存可以缓解该问题。</p>
<h3 id="最小化JavaScript代码"><a href="#最小化JavaScript代码" class="headerlink" title="最小化JavaScript代码"></a>最小化JavaScript代码</h3><p>​    最小化JavaScript代码指在JS代码中删除不必要的字符，从而降低下载时间，两个流行的工具是#JSMin和YUI Compressor。</p>
<p>​    混淆是最小化于源码的备选方式，象最小化一样，它通过删除注释和空格来减少源码大小，同时它还可以对代码进行混淆处理，作为混淆的一部分，函数名和变量名被替换成短的字符串，这使得代码更紧凑，同时也更难读，使得难于被反向工程，Dojo Compressor (ShrinkSafe)是最常见的混淆工具。</p>
<p>​    最小化是安全的、直白的过程，而混淆则更复杂，而且容易产生问题，从对国外10大网站的调查来看，通过最小化，文件可减少21%，而混淆则可减少25%。</p>
<p>​    除了最小化外部脚本文件外，内嵌的脚本代码也应该被最小化，即使脚本根据法则4被压缩后传输，最小化脚本刻减少文件大小5%或更高。</p>
<p>​    对此，建议是：我们没有直接使用JS压缩，但是我们用的许多组件例如ext2、jquery等，已经在为我们实践该法则。</p>
<h3 id="避免重定向"><a href="#避免重定向" class="headerlink" title="避免重定向"></a>避免重定向</h3><p>​    重定向功能是通过301和302这两个HTTP状态码完成的，如：</p>
<blockquote>
<p>​        HTTP/1.1 301 Moved Permanently<br>​        　　Location: <a href="http://xiaxiangyun.cn/astrology" target="_blank" rel="external">http://xiaxiangyun.cn/astrology</a><br>​        　　Content-Type: text/html</p>
</blockquote>
<p>​    浏览器自动重定向请求到Location指定的URL上，重定向的主要问题是降低了用户体验。</p>
<p>​    一种最耗费资源、经常发生而很容易被忽视的重定向是URL的最后缺少/，如访问<a href="http://www.xiaxiangyun.cn/astrology将被重定向到http://www.xiaxiangyun.cn/astrology/，在Apache下，可以通过Alias，mod_rewrite或DirectorySlash等方式来解决该问题。" target="_blank" rel="external">http://www.xiaxiangyun.cn/astrology将被重定向到http://www.xiaxiangyun.cn/astrology/，在Apache下，可以通过Alias，mod_rewrite或DirectorySlash等方式来解决该问题。</a></p>
<p>​    经验丰富的SA已经为我们考虑了这个问题，对此，建议是：大家可以看看线上环境的Apache配置文件：httpd.conf。</p>
<h3 id="删除重复的脚本文件"><a href="#删除重复的脚本文件" class="headerlink" title="删除重复的脚本文件"></a>删除重复的脚本文件</h3><p>​    在一个页面中包含重复的JS脚本文件会影响性能，即它会建立不必要的HTTP请求和额外的JS执行。</p>
<p>​    不必要的HTTP请求发生在IE下，而Firefox不会产生多余的HTTP请求，额外的JS执行，不管在IE下，还是在Firefox下，都会发生。</p>
<p>​    一个避免重复的脚本文件的方式是使用模板系统来建立脚本管理模块，除了防止重复的脚本文件外，该模块还可以实现依赖性检查和增加版本号到脚本文件名中，从而实现超长的过期时间。</p>
<p>​    对此，建议是：旧版本的Xplatform中这个问题比较严重，不过相信新版的XCube不会重蹈覆辙。</p>
<p>​    另外，提醒大家一点：一些javascript框架、javascript包一定要慎用，至少要问一下：用了这个js kit到底给我们多少方便，提高了多少工作效率，然后，再与它因为多余的、重复的代码带来的负面效果比较一下。</p>
<h3 id="配置ETags"><a href="#配置ETags" class="headerlink" title="配置ETags"></a>配置ETags</h3><p>​    Etag（Entity tags）实体标签，这个tag和你在网上经常看到的标签云那种tag有点区别，这个Etag不是给用户用的，而是给浏览器缓存用的。</p>
<p>​    Etag是服务器告诉浏览器缓存，缓存中的内容是否已经发生变化的一种机制，通过Etag，浏览器就可以知道现在的缓存中的内容是不是最新的，需不需要重新从服务器上重新下载，这和“Last-Modified”的概念有点类似，很遗憾作为网页开发人员对此无能为力，他依然是网站服务器人员的工作范畴。</p>
<p>​    ETags是用于确定浏览器缓存中元素是否与Web server中的元素相匹配的机制，它是比last-modified date更灵活的元素验证机制。</p>
<p>​    ETag是用于唯一表示元素版本的字符串，它需被包括在引号中，Web server首先在response中指定ETag：</p>
<blockquote>
<p>​        HTTP/1.1 200 OK<br>​        　　Last-Modified: Tue, 12 Dec 2006 03:03:59 GMT<br>​        　　ETag: “10c24bc-4ab-457e1c1f”<br>​        　　Content-Length: 12195</p>
</blockquote>
<p>​    后来，如果浏览器需要验证某元素，它使用If-None-Match头回传ETag给Web server，如果ETag匹配，则服务器返回304代码，从而节省了下载时间：</p>
<blockquote>
<p>​        GET /i/yahoo.gif HTTP/1.1<br>​        　　Host: mahaixiang.cn<br>​        　　If-Modified-Since: Tue, 12 Dec 2006 03:03:59 GMT<br>​        　　If-None-Match: “10c24bc-4ab-457e1c1f”<br>​        　　HTTP/1.1 304 Not Modified</p>
</blockquote>
<p>​    ETags的问题在于它们是基于服务器唯一性的某些属性构造的，如Apache1.3和2.x，其格式是inode-size-timestamp，而在IIS5.0和6.0下，其格式是Filetimestamp:ChangeNumber。</p>
<p>​    这样同一个元素在不同的web server上，其ETag是不一样的，在多Web server的环境下，浏览器先从server1请求某元素，后来向server2验证该元素，由于ETag不同，所以缓存失效，必须重新下载。</p>
<p>​    因此，如果您未用到ETags系统提供的灵活的验证机制，最好删除ETag，删除ETag会减少http response及后续请求的HTTP头的大小，微软支持文章描述了如何删除ETags，而在Apache下，只要在配置文件中设置FileETag none即可。</p>
<p>​    对此，建议是：自定义ETag的生成策略，以尽量减少探头规则的生成次数，由于不是采用服务器默认的ETag，不存在该问题，如果以前没有关注过的，赶快检查一下Apache中的配置。</p>
<h3 id="缓存Ajax"><a href="#缓存Ajax" class="headerlink" title="缓存Ajax"></a>缓存Ajax</h3><p>​    现在的Ajax好像有点被神话了，好像网页只要Ajax了，那么就不存在效率问题了，其实这是一种误解，拙劣的使用Ajax不会让你的网页效率更高，反而会降低你的网页效率。</p>
<p>​    Ajax的确是个好东西，但是请不要过分的神话它，使用Ajax的时候也要考虑上面的那些准则。</p>
<p>​    另外，性能优化法则同样适用于web 2.0应用，提高Ajax的性能最重要的方式是使得其response可缓存，就象“法则3增加Expires Header”讨论的那样，以下其他法则同样适用于Ajax，当然法则3是最有效的方式。</p>
<p>参考文章：<a href="http://www.mahaixiang.cn/znseo/1056.html" target="_blank" rel="external">雅虎十四条：网站前端网页优化的14条原则</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/开发/">开发</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/网页优化/">网页优化</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/10/09/网站前端网页优化的14条原则（雅虎十四条）/" data-title="网站前端网页优化的14条原则（雅虎十四条） | 夏祥云的博客" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/10/19/videojs的使用/" title="videojs的使用">
  <strong>上一篇：</strong><br/>
  <span>
  videojs的使用</span>
</a>
</div>


<div class="next">
<a href="/2016/09/25/bind方法的实现/"  title="bind方法的实现">
 <strong>下一篇：</strong><br/> 
 <span>bind方法的实现
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/10/09/网站前端网页优化的14条原则（雅虎十四条）/" data-title="网站前端网页优化的14条原则（雅虎十四条）" data-url="http://yoursite.com/2016/10/09/网站前端网页优化的14条原则（雅虎十四条）/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#减少HTTP请求次数"><span class="toc-number">1.</span> <span class="toc-text">减少HTTP请求次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用CDN-Content-Delivery-Network，内容分发网络"><span class="toc-number">2.</span> <span class="toc-text">使用CDN(Content Delivery Network，内容分发网络)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#增加Expires-Header"><span class="toc-number">3.</span> <span class="toc-text">增加Expires Header</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩页面元素"><span class="toc-number">4.</span> <span class="toc-text">压缩页面元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把样式表放在头上"><span class="toc-number">5.</span> <span class="toc-text">把样式表放在头上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把脚本文件放在底部"><span class="toc-number">6.</span> <span class="toc-text">把脚本文件放在底部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免CSS表达式"><span class="toc-number">7.</span> <span class="toc-text">避免CSS表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#把JavaScript和CSS放到外部文件中"><span class="toc-number">8.</span> <span class="toc-text">把JavaScript和CSS放到外部文件中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#减少DNS查询次数"><span class="toc-number">9.</span> <span class="toc-text">减少DNS查询次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最小化JavaScript代码"><span class="toc-number">10.</span> <span class="toc-text">最小化JavaScript代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免重定向"><span class="toc-number">11.</span> <span class="toc-text">避免重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除重复的脚本文件"><span class="toc-number">12.</span> <span class="toc-text">删除重复的脚本文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置ETags"><span class="toc-number">13.</span> <span class="toc-text">配置ETags</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存Ajax"><span class="toc-number">14.</span> <span class="toc-text">缓存Ajax</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/H5/" title="H5">H5<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/JS/" title="JS">JS<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具/" title="工具">工具<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/开发/" title="开发">开发<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/文档/" title="文档">文档<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/框架/" title="框架">框架<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/移动web/" title="移动web">移动web<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/面向对象/" title="面向对象">面向对象<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/regexp/" title="regexp">regexp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Canvas/" title="Canvas">Canvas<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Cookies-Session/" title="Cookies&amp;Session">Cookies&amp;Session<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/PHP/" title="PHP">PHP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HTTP/" title="HTTP">HTTP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/angularjs/" title="angularjs">angularjs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/requirejs/" title="requirejs">requirejs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/shell和vi/" title="shell和vi">shell和vi<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/跨域/" title="跨域">跨域<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/videojs/" title="videojs">videojs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/懒加载/" title="懒加载">懒加载<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AJAX/" title="AJAX">AJAX<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Bootstrap/" title="Bootstrap">Bootstrap<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/gulp/" title="gulp">gulp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/函数/" title="函数">函数<sup>1</sup></a></li>
			
		
		</ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">2</span></li></ul>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 不懂产品的设计不是好码农 <br/>
			Where amazing happens.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="Xiangyun-Xia">Xiangyun-Xia</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"祥云"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
